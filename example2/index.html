<!DOCTYPE html>
<html>
<head><title>Checkbox Form</title></head>
<body>
  <h2>Select Your Options</h2>
  <form id="seekerPreferencesForm">
    <input type="hidden" id="challengeId" value="123"> <!-- This would usually come from your login system -->
    <label><input type="checkbox" name="seeker_preferences" value="1">Feasible solutions</label><br>
    <label><input type="checkbox" name="seeker_preferences" value="2">Proof of concept</label><br>
    <label><input type="checkbox" name="seeker_preferences" value="3">Technical advice</label><br>
    <button type="submit">Submit</button>
  </form>

  <script>
    document.getElementById("seekerPreferencesForm").addEventListener("submit", async function(event) {
      event.preventDefault();

      const userId = parseInt(document.getElementById("challengeId").value);
      const checked = Array.from(document.querySelectorAll('input[name="seeker_preferences"]:checked'))
                          .map(cb => cb.value);

      const res = await fetch("/api/save-checkboxes", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          user_id: userId,
          selected: checked
        })
      });

      if (res.ok) {
        alert("Selections saved!");
      } else {
        alert("Failed to save.");
      }
    });
  </script>
</body>
</html>