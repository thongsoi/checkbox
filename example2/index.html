<!DOCTYPE html>
<html>
<head><title>Checkbox Form</title></head>
<body>
  <h2>Select Your Options</h2>
  <form id="seekerPreferencesForm">
    <fieldset>
    <legend>What I am looking for</legend>
    <div>
      <input type="checkbox" id="looking_for_1" name="looking_for" value="1">
      <label for="looking_for">Feasible solutions</label>
    </div>  
    <div>
      <input type="checkbox" id="looking_for_2" name="looking_for" value="2">
      <label for="looking_for">Proof of concept</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_3" name="looking_for" value="3">
      <label for="looking_for">Technical advice</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_4" name="looking_for" value="4">
      <label for="looking_for">Creative approaches</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_5" name="looking_for" value="5">
      <label for="looking_for">New collaborators</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_6" name="looking_for" value="6">
      <label for="looking_for">Co-founders or partners</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_7" name="looking_for" value="7">
      <label for="looking_for">Hiring opportunities</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_8" name="looking_for" value="8">
      <label for="looking_for">Mentorship offers</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_9" name="looking_for" value="9">
      <label for="looking_for_9">Technical feedback</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_10" name="looking_for" value="10">
      <label for="looking_for_10">Early adopter feedback</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_11" name="looking_for" value="11">
      <label for="looking_for_11">Investors</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_12" name="looking_for" value="12">
      <label for="looking_for_12">Community interest</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_13" name="looking_for" value="13">
      <label for="looking_for_13">Visibility and reputation</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_14" name="looking_for" value="14">
      <label for="looking_for_14">Open innovation input</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_15" name="looking_for" value="15">
      <label for="looking_for_15">Funding or sponsorship</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_16" name="looking_for" value="16">
      <label for="looking_for_16">Customers and revenue</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_17" name="looking_for" value="17">
      <label for="looking_for_17">Donations</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_18" name="looking_for" value="18">
      <label for="looking_for_18">Barter or exchange offers</label>
    </div>
    <div>
      <input type="checkbox" id="looking_for_19" name="looking_for" value="19">
      <label for="looking_for_19">Learning opportunities</label>
    </div>
    <button type="submit">Submit</button>
    </fieldset>
  </form>

  <script>
    document.getElementById("seekerPreferencesForm").addEventListener("submit", async function(event) {
      event.preventDefault();

      const userId = parseInt(document.getElementById("challengeId").value);
      const checked = Array.from(document.querySelectorAll('input[name="seeker_preferences"]:checked'))
                          .map(cb => cb.value);

      const res = await fetch("/api/save-checkboxes", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          user_id: userId,
          selected: checked
        })
      });

      if (res.ok) {
        alert("Selections saved!");
      } else {
        alert("Failed to save.");
      }
    });
  </script>
</body>
</html>